{"title":{"en":"G. Weighted Increasing Subsequences","ru":"G. Взвешенные возрастающие подпоследовательности"},"contestId":"1621","problemIndex":"G","timeLimit":{"en":"1 second","ru":"1 секунда"},"memLimit":{"en":"256 megabytes","ru":"256 мегабайт"},"inputFormat":{"en":"standard input","ru":"стандартный ввод"},"outputFormat":{"en":"standard output","ru":"стандартный вывод"},"problemHtml":{"en":"<p>You are given the sequence of integers $$$a_1, a_2, \\ldots, a_n$$$ of length $$$n$$$. </p><p>The sequence of indices $$$i_1 &lt; i_2 &lt; \\ldots &lt; i_k$$$ of length $$$k$$$ denotes the subsequence $$$a_{i_1}, a_{i_2}, \\ldots, a_{i_k}$$$ of length $$$k$$$ of sequence $$$a$$$.</p><p>The subsequence $$$a_{i_1}, a_{i_2}, \\ldots, a_{i_k}$$$ of length $$$k$$$ of sequence $$$a$$$ is called increasing subsequence if $$$a_{i_j} &lt; a_{i_{j+1}}$$$ for each $$$1 \\leq j &lt; k$$$.</p><p>The <span class=\"tex-font-style-it\">weight</span> of the increasing subsequence $$$a_{i_1}, a_{i_2}, \\ldots, a_{i_k}$$$ of length $$$k$$$ of sequence $$$a$$$ is the number of $$$1 \\leq j \\leq k$$$, such that exists index $$$i_k &lt; x \\leq n$$$ and $$$a_x &gt; a_{i_j}$$$.</p><p>For example, if $$$a = [6, 4, 8, 6, 5]$$$, then the sequence of indices $$$i = [2, 4]$$$ denotes increasing subsequence $$$[4, 6]$$$ of sequence $$$a$$$. The weight of this increasing subsequence is $$$1$$$, because for $$$j = 1$$$ exists $$$x = 5$$$ and $$$a_5 = 5 &gt; a_{i_1} = 4$$$, but for $$$j = 2$$$ such $$$x$$$ doesn't exist.</p><p>Find the sum of weights of all increasing subsequences of $$$a$$$ modulo $$$10^9+7$$$.</p>","ru":"<p>Вам дана последовательность целых чисел $$$a_1, a_2, \\ldots, a_n$$$ длины $$$n$$$. </p><p>Последовательность индексов $$$i_1 &lt; i_2 &lt; \\ldots &lt; i_k$$$ длины $$$k$$$ задаёт подпоследовательность $$$a_{i_1}, a_{i_2}, \\ldots, a_{i_k}$$$ длины $$$k$$$ последовательности $$$a$$$.</p><p>Подпоследовательность $$$a_{i_1}, a_{i_2}, \\ldots, a_{i_k}$$$ длины $$$k$$$ последовательности $$$a$$$ называется возрастающей, если $$$a_{i_j} &lt; a_{i_{j+1}}$$$ для всех $$$1 \\leq j &lt; k$$$.</p><p>Назовём <span class=\"tex-font-style-it\">весом</span> возрастающей подпоследовательности $$$a_{i_1}, a_{i_2}, \\ldots, a_{i_k}$$$ длины $$$k$$$ последовательности $$$a$$$ количество таких $$$1 \\leq j \\leq k$$$, для которых существует $$$i_k &lt; x \\leq n$$$, такой что $$$a_x &gt; a_{i_j}$$$.</p><p>Например, если $$$a = [6, 4, 8, 6, 5]$$$, то последовательность индексов $$$i = [2, 4]$$$ задаёт возрастающую подпоследовательность $$$[4, 6]$$$ последовательности $$$a$$$. Вес этой возрастающей подпоследовательности будет равен $$$1$$$, так как для $$$j = 1$$$ существует $$$x = 5$$$ для которого $$$a_5 = 5 &gt; a_{i_1} = 4$$$, а для $$$j = 2$$$ такого $$$x$$$ не существует.</p><p>Найдите сумму весов всех возрастающих подпоследовательностей $$$a$$$ по модулю $$$10^9+7$$$.</p>"},"inSpecsHtml":{"en":"<div class=\"section-title\">Input</div><p>The first line contains a single integer $$$t$$$ ($$$1 \\leq t \\leq 1000$$$)&nbsp;— the number of test cases.</p><p>The first line of each test case contains the single integer $$$n$$$ ($$$1 \\leq n \\leq 2 \\cdot 10^5$$$)&nbsp;— the length of the sequence $$$a$$$.</p><p>The second line of each test case contains $$$n$$$ integers $$$a_1, a_2, \\ldots, a_n$$$ ($$$1 \\leq a_i \\leq 10^9$$$)&nbsp;— the sequence $$$a$$$.</p><p>It is guaranteed that the sum of $$$n$$$ over all test cases doesn't exceed $$$2 \\cdot 10^5$$$.</p>","ru":"<div class=\"section-title\">Входные данные</div><p>В первой строке задано одно целое число $$$t$$$ ($$$1 \\leq t \\leq 1000$$$)&nbsp;— количество наборов входных данных. Далее следуют описания этих наборов.</p><p>В первой строке дано одно число $$$n$$$ ($$$1 \\leq n \\leq 2 \\cdot 10^5$$$)&nbsp;— длина последовательности $$$a$$$.</p><p>Во второй строке дано $$$n$$$ целых чисел $$$a_1, a_2, \\ldots, a_n$$$ ($$$1 \\leq a_i \\leq 10^9$$$)&nbsp;— последовательность $$$a$$$.</p><p>Гарантируется, что сумма $$$n$$$ по всем наборам входных данных не превосходит $$$2 \\cdot 10^5$$$.</p>"},"outSpecsHtml":{"en":"<div class=\"section-title\">Output</div><p>For each test case, print the sum of weights of all increasing subsequences $$$a$$$ modulo $$$10^9+7$$$.</p>","ru":"<div class=\"section-title\">Выходные данные</div><p>Для каждого набора входных данных выведите одно число: сумму весов всех возрастающих подпоследовательностей $$$a$$$ по модулю $$$10^9+7$$$.</p>"},"noteHtml":{"en":"<div class=\"section-title\">Note</div><p>In the first test case the following increasing subsequences of $$$a$$$ have not zero weight: </p><ul> <li> The weight of $$$[a_1] = [6]$$$ is $$$1$$$. </li><li> The weight of $$$[a_2] = [4]$$$ is $$$1$$$. </li><li> The weight of $$$[a_2, a_3] = [4, 8]$$$ is $$$1$$$. </li><li> The weight of $$$[a_2, a_4] = [4, 6]$$$ is $$$1$$$. </li></ul> The sum of weights of increasing subsequences is $$$4$$$.<p>In the second test case there are $$$7$$$ increasing subsequences of $$$a$$$ with not zero weight: $$$3$$$ with weight $$$1$$$, $$$3$$$ with weight $$$2$$$ and $$$1$$$ with weight $$$3$$$. The sum of weights is $$$12$$$.</p>","ru":"<div class=\"section-title\">Примечание</div><p>В первом наборе входных данных следующие возрастающие подпоследовательности $$$a$$$ имеют ненулевой вес: </p><ul> <li> $$$[a_1] = [6]$$$ имеет вес $$$1$$$. </li><li> $$$[a_2] = [4]$$$ имеет вес $$$1$$$. </li><li> $$$[a_2, a_3] = [4, 8]$$$ имеет вес $$$1$$$. </li><li> $$$[a_2, a_4] = [4, 6]$$$ имеет вес $$$1$$$. </li></ul> Сумма весов всех возрастающих подпоследовательностей равна $$$4$$$.<p>Во втором тестовом случае существует $$$7$$$ возрастающих подпоследовательностей $$$a$$$ ненулевого веса: $$$3$$$ веса $$$1$$$, $$$3$$$ веса $$$2$$$ и $$$1$$$ веса $$$3$$$. Сумма весов равна $$$12$$$.</p>"},"sampleTestcases":[{"id":1641220811171,"input":"4\n5\n6 4 8 6 5\n4\n1 2 3 4\n3\n3 2 2\n4\n4 5 6 5\n","output":"4\n12\n0\n6\n"}],"submitUrl":"https://codeforces.com/contest/1621/submit","language":"c++","isPartOfContest":true}