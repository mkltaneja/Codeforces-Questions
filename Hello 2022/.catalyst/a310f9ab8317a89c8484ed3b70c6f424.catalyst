{"title":{"en":"B. Integers Shop","ru":"B. Магазин целых чисел"},"contestId":"1621","problemIndex":"B","timeLimit":{"en":"2 seconds","ru":"2 секунды"},"memLimit":{"en":"256 megabytes","ru":"256 мегабайт"},"inputFormat":{"en":"standard input","ru":"стандартный ввод"},"outputFormat":{"en":"standard output","ru":"стандартный вывод"},"problemHtml":{"en":"<p>The integers shop sells $$$n$$$ segments. The $$$i$$$-th of them contains all integers from $$$l_i$$$ to $$$r_i$$$ and costs $$$c_i$$$ coins.</p><p>Tomorrow Vasya will go to this shop and will buy some segments there. He will get all integers that appear in at least one of bought segments. The total cost of the purchase is the sum of costs of all segments in it.</p><p>After shopping, Vasya will get some more integers as a gift. He will get integer $$$x$$$ as a gift if and only if all of the following conditions are satisfied: </p><ul> <li> Vasya hasn't bought $$$x$$$. </li><li> Vasya has bought integer $$$l$$$ that is less than $$$x$$$. </li><li> Vasya has bought integer $$$r$$$ that is greater than $$$x$$$. </li></ul><p>Vasya can get integer $$$x$$$ as a gift only once so he won't have the same integers after receiving a gift.</p><p>For example, if Vasya buys segment $$$[2, 4]$$$ for $$$20$$$ coins and segment $$$[7, 8]$$$ for $$$22$$$ coins, he spends $$$42$$$ coins and receives integers $$$2, 3, 4, 7, 8$$$ from these segments. He also gets integers $$$5$$$ and $$$6$$$ as a gift.</p><p>Due to the technical issues only the first $$$s$$$ segments (that is, segments $$$[l_1, r_1], [l_2, r_2], \\ldots, [l_s, r_s]$$$) will be available tomorrow in the shop.</p><p>Vasya wants to get (to buy or to get as a gift) as many integers as possible. If he can do this in differents ways, he selects the cheapest of them.</p><p>For each $$$s$$$ from $$$1$$$ to $$$n$$$, find how many coins will Vasya spend if only the first $$$s$$$ segments will be available.</p>","ru":"<p>Магазин целых чисел продаёт $$$n$$$ отрезков, $$$i$$$-й из которых состоит из чисел от $$$l_i$$$ до $$$r_i$$$ и стоит $$$c_i$$$ монет. </p><p>Завтра Вася отравится в этот магазин и купит несколько отрезков. Он получит все числа, лежащие хотя бы в одном из выбранных отрезков. Количество монет, которое он потратит на покупку равно сумме стоимостей отрезков, которые он купит.</p><p>В качестве подарка за покупку, Вася дополнительно получит ещё несколько целых чисел. Число $$$x$$$, не купленное Васей ранее, он получит тогда и только тогда, когда для $$$x$$$ выполняются два следующих условия: </p><ul> <li> Найдётся купленное Васей число $$$l$$$, меньшее $$$x$$$. </li><li> Найдётся купленное Васей число $$$r$$$, большее $$$x$$$. </li></ul><p>Число $$$x$$$ Вася может получить в подарок не более одного раза, таким образом все числа, которые получит Вася будут различными.</p><p>Например, если Вася купит отрезок $$$[2, 4]$$$ за $$$20$$$ монет и отрезок $$$[7, 8]$$$ за $$$22$$$ монеты, он потратит $$$42$$$ монеты и получит числа $$$2, 3, 4, 7, 8$$$ как содержимое отрезков. В качестве подарка он получит числа $$$5$$$ и $$$6$$$.</p><p>По техническим причинам, завтра в магазине будут доступны к покупке только $$$s$$$ первых отрезков (то есть отрезки $$$[l_1, r_1], [l_2, r_2], \\ldots, [l_s, r_s]$$$). Вася не сможет купить отрезки, не доступные к покупке.</p><p>Вася хочет получить (купить или получить в подарок) как можно больше целых чисел. Если это можно сделать разными способами, то он выберет самый дешёвый из них.</p><p>Для всех значений $$$s$$$ от $$$1$$$ до $$$n$$$ определите, сколько монет потратит Вася, если к покупке будут доступны только $$$s$$$ первых отрезков.</p>"},"inSpecsHtml":{"en":"<div class=\"section-title\">Input</div><p>The first line contains a single integer $$$t$$$ ($$$1 \\leq t \\leq 1000$$$)&nbsp;— the number of test cases.</p><p>The first line of each test case contains the single integer $$$n$$$ ($$$1 \\leq n \\leq 10^5$$$)&nbsp;— the number of segments in the shop.</p><p>Each of next $$$n$$$ lines contains three integers $$$l_i$$$, $$$r_i$$$, $$$c_i$$$ ($$$1 \\leq l_i \\leq r_i \\leq 10^9, 1 \\leq c_i \\leq 10^9$$$)&nbsp;— the ends of the $$$i$$$-th segments and its cost.</p><p>It is guaranteed that the total sum of $$$n$$$ over all test cases doesn't exceed $$$2 \\cdot 10^5$$$.</p>","ru":"<div class=\"section-title\">Входные данные</div><p>В первой строке задано одно целое число $$$t$$$ ($$$1 \\leq t \\leq 1000$$$)&nbsp;— количество наборов входных данных. Далее следуют описания этих наборов.</p><p>В первой строке дано одно число $$$n$$$ ($$$1 \\leq n \\leq 10^5$$$)&nbsp;— количество отрезков в магазине.</p><p>В следующих $$$n$$$ строках дано по три числа $$$l_i$$$, $$$r_i$$$, $$$c_i$$$ ($$$1 \\leq l_i \\leq r_i \\leq 10^9, 1 \\leq c_i \\leq 10^9$$$)&nbsp;— концы $$$i$$$-го отрезка и его стоимость.</p><p>Гарантируется, что сумма $$$n$$$ по всем наборам входных данных не превосходит $$$2 \\cdot 10^5$$$.</p>"},"outSpecsHtml":{"en":"<div class=\"section-title\">Output</div><p>For each test case output $$$n$$$ integers: the $$$s$$$-th ($$$1 \\leq s \\leq n$$$) of them should be the number of coins Vasia will spend in the shop if only the first $$$s$$$ segments will be available.</p>","ru":"<div class=\"section-title\">Выходные данные</div><p>Для каждого набора входных данных выведите $$$n$$$ чисел: $$$s$$$-е ($$$1 \\leq s \\leq n$$$) из них должно быть равно количеству монет, которое потратит Вася, если к покупке будут доступны только первые $$$s$$$ отрезков.</p>"},"noteHtml":{"en":"<div class=\"section-title\">Note</div><p>In the first test case if $$$s = 1$$$ then Vasya can buy only the segment $$$[2, 4]$$$ for $$$20$$$ coins and get $$$3$$$ integers.</p><p>The way to get $$$7$$$ integers for $$$42$$$ coins in case $$$s = 2$$$ is described in the statement.</p><p>In the second test case note, that there can be the same segments in the shop.</p>","ru":"<div class=\"section-title\">Примечание</div><p>В первом наборе входных данных при $$$s = 1$$$ Вася может купить только один отрезок $$$[2, 4]$$$ за $$$20$$$ монет и получить $$$3$$$ числа.</p><p>Способ получить $$$7$$$ чисел за $$$42$$$ монеты при $$$s = 2$$$ описан в условии.</p><p>Во втором наборе входных данных обратите внимание на то, что в магазине могут быть одинаковые отрезки.</p>"},"sampleTestcases":[{"id":1641220798444,"input":"3\n2\n2 4 20\n7 8 22\n2\n5 11 42\n5 11 42\n6\n1 4 4\n5 8 9\n7 8 7\n2 10 252\n1 11 271\n1 10 1\n","output":"20\n42\n42\n42\n4\n13\n11\n256\n271\n271\n","result":{"id":1641220798444,"stdout":"20\r\n42\r\n42\r\n42\r\n4\r\n13\r\n11\r\n256\r\n271\r\n271\r\n","stderr":"","exitcode":0,"signal":null,"time":69,"timeout":false}}],"submitUrl":"https://codeforces.com/contest/1621/submit","language":"c++","isPartOfContest":true,"langId":"54","editorial":"<div><p>Let $$$L$$$ be the minimum integer Vasya will buy and $$$R$$$ be the maximum integer Vasya will buy. Then it is easy to see that he will get all integers between $$$L$$$ and $$$R$$$ and only them after receiving a gift.</p><p>Because Vasya wants to maximise the number of integers he will get, he should buy the smallest and the largest integers available in the shop. They can either appear in the same segment or in different segments. It is important to note that if they appear in the same segment, then it is the longest one.</p><p>Let's add the segments to shop one by one and maintain the following six values: </p><ul> <li> The smallest integer in the shop and the cost of the cheapest segment that contains it. </li><li> The largest integer in the shop and the cost of the cheapest segment that contains it. </li><li> The length of the longest segment and the cost of the cheapest of such segments. </li></ul> It is easy to see that when we add new segment this values can only be updated by parameters of the new segment.<p>When we know all this values it is easy to find how many coins Vasya will spend in the shop.</p><p>Total time complexity of this solution is $$$\\mathcal{O}(n)$$$. There are other solutions (for example, solution with sets) that runs in $$$\\mathcal{O}(n \\log n)$$$.</p></div>"}